digraph workflow {
  ratio="compress" rankdir="TB" label=<<B>ImageWorkflow</B>>
  node [fontsize="8" fontname="Arial" color="lightBlue" style="filled" fixedsize="false" width="2" height="1"];
  edge [fontsize="7" fontname="Arial" color="#333333" arrowhead="normal" arrowsize="0.5"];

  place_new [label=<<B>new</B><BR/><I>persisted to database</I>>, shape=oval fillcolor="lightgreen" style="filled" xlabel="Place new: Created during app:load"];
  place_dispatched [label=<<B>dispatched</B><BR/><I>dispatched to sais</I>>, shape=oval fillcolor="lightgreen" style="filled" xlabel="Place dispatched: "];
  place_ready [label=<<B>ready</B><BR/><I>has resized</I>>, shape=oval fillcolor="lightgreen" style="filled" xlabel="Place ready: "];
  place_failed [label=<<B>failed</B>>, shape=oval fillcolor="lightgreen" style="filled" xlabel="Place failed: "];
  transition_dispatch [label=<<B>dispatch</B><BR/><I>request resize</I>>, shape="box" regular="" xlabel="Transition dispatch: Send a resize request to sais"];
  transition_complete [label=<<B>complete</B><BR/><U>Thumbnails</U><BR/><I>if resized exist</I>>, shape="box" regular="" xlabel="Transition complete: After thumb webhook has been received"];
  transition_fail [label=<<B>fail</B>>, shape="box" regular="" xlabel="Transition fail: "];
  place_new -> transition_dispatch [style="solid", comment="new"];
  transition_dispatch -> place_dispatched [style="solid"];
  place_dispatched -> transition_complete [style="solid", comment="dispatched"];
  transition_complete -> place_ready [style="solid"];
  place_ready -> transition_fail [style="solid", comment="ready"];
  transition_fail -> place_failed [style="solid"];
}
